(this.webpackJsonpnotas=this.webpackJsonpnotas||[]).push([[0],{22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(2),o=n.n(r),c=n(10),i=n.n(c),s=(n(22),n(6)),l=n.n(s),d=n(8),h=n(3),u=n(1),j=n(11),b=n(4),f=n(12),g=(n(24),n(25),n.p+"static/media/logo512.998b52df.png"),p=n(13),O=n(14),N=n(16),x=n(15),y=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("svg",{id:"_x31_px",fill:"#545454",enableBackground:"new 0 0 24 24",height:"20",viewBox:"0 0 24 24",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{d:"m12 16c-.128 0-.256-.049-.354-.146l-5.5-5.5c-.143-.144-.186-.358-.108-.545.077-.187.26-.309.462-.309h3v-6.5c0-.551.449-1 1-1h3c.551 0 1 .449 1 1v6.5h3c.202 0 .385.122.462.309.078.187.035.402-.108.545l-5.5 5.5c-.098.097-.226.146-.354.146zm-4.293-5.5 4.293 4.293 4.293-4.293h-2.293c-.276 0-.5-.224-.5-.5v-7h-3v7c0 .276-.224.5-.5.5z"}),Object(a.jsx)("path",{d:"m22.5 22h-21c-.827 0-1.5-.673-1.5-1.5v-1c0-.827.673-1.5 1.5-1.5h21c.827 0 1.5.673 1.5 1.5v1c0 .827-.673 1.5-1.5 1.5zm-21-3c-.276 0-.5.224-.5.5v1c0 .276.224.5.5.5h21c.276 0 .5-.224.5-.5v-1c0-.276-.224-.5-.5-.5z"})]})}}]),n}(r.Component);function v(e){return Object(a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15000 15000",children:[Object.keys(e.Graph.NodeDictionary).map((function(t){return(""===e.FilterHashtag||e.Graph.NodeDictionary[t].Hashtags.includes(e.FilterHashtag))&&e.Graph.NodeDictionary[t].LinksTowards.map((function(n){return Object(a.jsx)("line",{x1:e.Graph.NodeDictionary[t].X.toString(),y1:e.Graph.NodeDictionary[t].Y.toString(),x2:e.Graph.NodeDictionary[n.ID].X.toString(),y2:e.Graph.NodeDictionary[n.ID].Y.toString(),style:{stroke:"grey",strokeWidth:4}},t+n.ID)}))})),Object.keys(e.Graph.NodeDictionary).map((function(t){return(""===e.FilterHashtag||e.Graph.NodeDictionary[t].Hashtags.includes(e.FilterHashtag))&&Object(a.jsxs)("g",{id:t,children:[Object(a.jsx)("circle",{onClick:function(n){return function(t,n){console.log("Test1"+n),e.onClickNode(n)}(0,t)},cx:e.Graph.NodeDictionary[t].X.toString(),cy:e.Graph.NodeDictionary[t].Y.toString(),r:"40",stroke:"lightgrey",strokeWidth:"4",fill:e.Graph.NodeDictionary[t].Hashtags.includes(e.HighlightedHashtag)?t===e.SelectedNode.ID?"red":"rgb(230,103,0)":t===e.SelectedNode.ID?"red":"grey"},t),Object(a.jsx)("text",{id:t,x:(e.Graph.NodeDictionary[t].X-40).toString(),y:(e.Graph.NodeDictionary[t].Y+60).toString(),style:{textAlign:"center",fontSize:"30"},children:e.Graph.NodeDictionary[t].Name})]})})),Object(a.jsx)("circle",{cx:7500,cy:7500,r:"20",stroke:"lightgrey",strokeWidth:"2",fill:"red"},"center")]})}n(26);var D=function(e){return Object(a.jsxs)("div",{className:"note-main",children:[Object(a.jsx)("h1",{children:e.Node.Name}),Object(a.jsx)("p",{children:e.Node.Hashtags.map((function(e){return Object(a.jsx)("span",{className:"hashtag",children:e},e)}))}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:e.Node.Text}),e.Node.LinksTowards.map((function(e){return Object(a.jsx)("a",{href:"bear://x-callback-url/open-note?id="+e.ID,children:e.Name},e.ID)}))]})};var m=function(){var e=Object(r.useState)({Energy:1e3,NodeDictionary:{}}),t=Object(b.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)({ID:"",Name:"",Text:"",Hashtags:[],X:0,Y:0,LinksTowards:[],LinksFrom:[]}),i=Object(b.a)(c,2),s=i[0],p=i[1],O=Object(r.useState)(""),N=Object(b.a)(O,2),x=N[0],m=N[1],w=Object(r.useState)(""),k=Object(b.a)(w,2),I=k[0],S=k[1],F=Object(r.useState)(""),H=Object(b.a)(F,2),L=H[0],T=H[1];function M(){return(M=Object(j.a)(l.a.mark((function e(){var t,a,r,c,i,s,j,b,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n,e.next=3,window.showDirectoryPicker();case 3:a=e.sent,r=!0,c=!1,e.prev=6,s=Object(f.a)(a.values());case 8:return e.next=10,s.next();case 10:return j=e.sent,r=j.done,e.next=14,j.value;case 14:if(b=e.sent,r){e.next=23;break}if("directory"!==(g=b).kind){e.next=19;break}return e.delegateYield(l.a.mark((function e(){var n,r,o,c,i,s,j,b,f,p,O,N,x,y,v,D,m,w,k;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getDirectoryHandle(g.name);case 2:return o=e.sent,e.next=5,o.getFileHandle("info.json");case 5:return c=e.sent,e.next=8,c.getFile();case 8:return i=e.sent,e.t0=JSON,e.next=12,i.text();case 12:return e.t1=e.sent,s=e.t0.parse.call(e.t0,e.t1),j=s["net.shinyfrog.bear"].uniqueIdentifier,e.next=17,o.getFileHandle("text.txt");case 17:return b=e.sent,e.next=20,b.getFile();case 20:return f=e.sent,e.next=23,f.text();case 23:p=e.sent,O=p.slice(2,p.indexOf("\n")),N={ID:j,Name:O},x=/\[.+\]+\([a-zA-Z\:\/\-\?]+id=+[A-Za-z0-9\-]+\)/g,y=/id=.+\)/g,v=/\[.+\]/g,D=/\B(\#[a-zA-Z/_\\xc4\\xe4\\xd6\\xf6\\xdc\\xfc]+)(?!;)/g,m=[],null===(n=p.match(x))||void 0===n||n.forEach((function(e){var t=y.exec(e),n="";null!==t&&(n=t[0]);var a=v.exec(e),r="";null!==a&&(r=a[0]),null===n||""===n||m.map((function(e){return e.ID})).includes(n)||m.push({ID:n.slice(3,n.length-1),Name:r})})),w=[],null===(r=p.match(D))||void 0===r||r.forEach((function(e){console.log(e),w.push(e)})),p=(p=(p=p.slice(p.indexOf("\n"),p.length)).replace(D,"")).replace(x,""),t=j in t.NodeDictionary?Object(u.a)(Object(u.a)({},t),{},{NodeDictionary:Object(u.a)(Object(u.a)({},t.NodeDictionary),{},Object(h.a)({},j,{ID:j,Name:O,Text:p,Hashtags:[].concat(Object(d.a)(t.NodeDictionary[j].Hashtags),w),X:t.NodeDictionary[j].X,Y:t.NodeDictionary[j].Y,LinksTowards:[].concat(Object(d.a)(t.NodeDictionary[j].LinksTowards),m),LinksFrom:t.NodeDictionary[j].LinksFrom}))}):Object(u.a)(Object(u.a)({},t),{},{NodeDictionary:Object(u.a)(Object(u.a)({},t.NodeDictionary),{},Object(h.a)({},j,{ID:j,Name:O,Text:p,Hashtags:w,X:Math.floor(Math.random()*Math.floor(15e3)),Y:Math.floor(Math.random()*Math.floor(15e3)),LinksTowards:m,LinksFrom:[]}))});for(k=0;k<m.length;k++)t=m[k].ID in t.NodeDictionary?Object(u.a)(Object(u.a)({},t),{},{NodeDictionary:Object(u.a)(Object(u.a)({},t.NodeDictionary),{},Object(h.a)({},m[k].ID,Object(u.a)(Object(u.a)({},t.NodeDictionary[m[k].ID]),{},{LinksFrom:[].concat(Object(d.a)(t.NodeDictionary[m[k].ID].LinksFrom),[N])})))}):Object(u.a)(Object(u.a)({},t),{},{NodeDictionary:Object(u.a)(Object(u.a)({},t.NodeDictionary),{},Object(h.a)({},m[k].ID,{ID:m[k].ID,Name:"",Text:"",Hashtags:[],X:Math.floor(Math.random()*Math.floor(15e3)),Y:Math.floor(Math.random()*Math.floor(15e3)),LinksTowards:[],LinksFrom:[N]}))});case 40:case"end":return e.stop()}}),e)}))(),"t0",19);case 19:o(t);case 20:r=!0,e.next=8;break;case 23:e.next=29;break;case 25:e.prev=25,e.t1=e.catch(6),c=!0,i=e.t1;case 29:if(e.prev=29,e.prev=30,r||null==s.return){e.next=34;break}return e.next=34,s.return();case 34:if(e.prev=34,!c){e.next=37;break}throw i;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[6,25,29,39],[30,,34,38]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=setTimeout((function(){o(Object(u.a)({},function(e){var t=e,n=[7500,7500],a=.5,r=0;return Object.keys(e.NodeDictionary).forEach((function(o){var c=e.NodeDictionary[o].X,i=e.NodeDictionary[o].Y,s=0,l=0;Object.keys(e.NodeDictionary).forEach((function(t){if(t!==o){var n=e.NodeDictionary[t].X,a=e.NodeDictionary[t].Y,r=Math.sqrt(Math.pow(c-n,2)+Math.pow(i-a,2));r<Math.pow(10,-3)&&(r=.5),s+=80*-(n-c)/r,l+=80*-(a-i)/r}})),s+=-(c-n[0]),l+=-(i-n[1]),e.NodeDictionary[o].LinksTowards.forEach((function(t){var n=e.NodeDictionary[t.ID].X,r=e.NodeDictionary[t.ID].Y;s+=(n-c)*a,l+=(r-i)*a})),e.NodeDictionary[o].LinksFrom.forEach((function(t){var n=e.NodeDictionary[t.ID].X,r=e.NodeDictionary[t.ID].Y;s+=(n-c)*a,l+=(r-i)*a})),r+=Math.pow(s,2)+Math.pow(l,2);var d=c+.1*s,h=i+.1*l;t.NodeDictionary[o].X=d,t.NodeDictionary[o].Y=h})),t.Energy=r,t}(n)))}),40);return function(){return clearTimeout(e)}})),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)("div",{className:"App-header",children:[Object(a.jsx)("div",{className:"download-logo-container",onClick:function(){return M.apply(this,arguments)},children:Object(a.jsx)(y,{})}),Object(a.jsxs)("div",{className:"searchbar-container",children:[Object(a.jsx)("input",{onChange:function(e){m(e.target.value),T(e.target.value)},className:"form-control searchbar",type:"text",placeholder:"Search","aria-label":"Search",value:x}),Object(a.jsx)("button",{onClick:function(){S(x)},children:"Submit"})]}),Object(a.jsx)("img",{className:"notas-logo",src:g,alt:""})]}),Object(a.jsxs)("div",{className:"App-main",children:[Object(a.jsx)("div",{className:"App-graph",children:Object(a.jsx)(v,{Graph:n,FilterHashtag:I,HighlightedHashtag:L,SelectedNode:s,onClickNode:function(e){e in n.NodeDictionary&&(console.log(e),p(Object(u.a)({},n.NodeDictionary[e])))}})}),Object(a.jsx)("div",{className:"App-sidebar",children:Object(a.jsx)(D,{Node:s})})]})]})},w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(m,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/notas",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/notas","/service-worker.js");w?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):k(t,e)}))}}(),I()}},[[27,1,2]]]);
//# sourceMappingURL=main.c8edc998.chunk.js.map