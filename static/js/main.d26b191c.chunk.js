(this.webpackJsonpnotas=this.webpackJsonpnotas||[]).push([[0],{22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(2),a=n.n(r),c=n(10),i=n.n(c),s=(n(22),n(5)),d=n.n(s),l=n(7),h=n(3),u=n(1),f=n(11),j=n(9),b=n(12),p=(n(24),n(25),n.p+"static/media/logo512.998b52df.png"),g=n(13),x=n(14),y=n(16),N=n(15),v=function(e){Object(y.a)(n,e);var t=Object(N.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("svg",{id:"_x31_px",fill:"#545454",enableBackground:"new 0 0 24 24",height:"20",viewBox:"0 0 24 24",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Object(o.jsx)("path",{d:"m12 16c-.128 0-.256-.049-.354-.146l-5.5-5.5c-.143-.144-.186-.358-.108-.545.077-.187.26-.309.462-.309h3v-6.5c0-.551.449-1 1-1h3c.551 0 1 .449 1 1v6.5h3c.202 0 .385.122.462.309.078.187.035.402-.108.545l-5.5 5.5c-.098.097-.226.146-.354.146zm-4.293-5.5 4.293 4.293 4.293-4.293h-2.293c-.276 0-.5-.224-.5-.5v-7h-3v7c0 .276-.224.5-.5.5z"}),Object(o.jsx)("path",{d:"m22.5 22h-21c-.827 0-1.5-.673-1.5-1.5v-1c0-.827.673-1.5 1.5-1.5h21c.827 0 1.5.673 1.5 1.5v1c0 .827-.673 1.5-1.5 1.5zm-21-3c-.276 0-.5.224-.5.5v1c0 .276.224.5.5.5h21c.276 0 .5-.224.5-.5v-1c0-.276-.224-.5-.5-.5z"})]})}}]),n}(r.Component);function O(e){return Object(o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15000 15000",children:[Object.keys(e.Graph.NodeDictionary).map((function(t){return e.Graph.NodeDictionary[t].LinksTowards.map((function(n){return Object(o.jsx)("line",{x1:e.Graph.NodeDictionary[t].X.toString(),y1:e.Graph.NodeDictionary[t].Y.toString(),x2:e.Graph.NodeDictionary[n.ID].X.toString(),y2:e.Graph.NodeDictionary[n.ID].Y.toString(),style:{stroke:"grey",strokeWidth:4}},t+n.ID)}))})),Object.keys(e.Graph.NodeDictionary).map((function(t){return Object(o.jsxs)("g",{id:t,children:[Object(o.jsx)("circle",{onClick:function(n){return function(t,n){console.log("Test1"+n),e.onClickNode(n)}(0,t)},cx:e.Graph.NodeDictionary[t].X.toString(),cy:e.Graph.NodeDictionary[t].Y.toString(),r:"40",stroke:"lightgrey",strokeWidth:"4",fill:t===e.SelectedNode.ID?"red":"grey"},t),Object(o.jsx)("text",{id:t,x:(e.Graph.NodeDictionary[t].X-40).toString(),y:(e.Graph.NodeDictionary[t].Y+60).toString(),style:{textAlign:"center",fontSize:"30"},children:e.Graph.NodeDictionary[t].Name})]})})),Object(o.jsx)("circle",{cx:7500,cy:7500,r:"20",stroke:"lightgrey",strokeWidth:"2",fill:"red"},"center")]})}n(26);var D=function(e){return Object(o.jsxs)("div",{className:"note-main",children:[Object(o.jsx)("h1",{children:e.Node.Name}),Object(o.jsx)("p",{children:e.Node.Hashtags.map((function(e){return Object(o.jsx)("span",{className:"hashtag",children:e},e)}))}),Object(o.jsx)("br",{}),Object(o.jsx)("div",{children:e.Node.Text}),e.Node.LinksTowards.map((function(e){return Object(o.jsx)("a",{href:"bear://x-callback-url/open-note?id="+e.ID,children:e.Name},e.ID)}))]})};var m=function(){var e=Object(r.useState)({Energy:1e3,NodeDictionary:{}}),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({ID:"",Name:"",Text:"",Hashtags:[],X:0,Y:0,LinksTowards:[],LinksFrom:[]}),i=Object(j.a)(c,2),s=i[0],g=i[1];function x(){return(x=Object(f.a)(d.a.mark((function e(){var t,o,r,c,i,s,f,j,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n,e.next=3,window.showDirectoryPicker();case 3:o=e.sent,r=!0,c=!1,e.prev=6,s=Object(b.a)(o.values());case 8:return e.next=10,s.next();case 10:return f=e.sent,r=f.done,e.next=14,f.value;case 14:if(j=e.sent,r){e.next=23;break}if("directory"!==(p=j).kind){e.next=19;break}return e.delegateYield(d.a.mark((function e(){var n,r,a,c,i,s,f,j,b,g,x,y,N,v,O,D,m,w,k;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getDirectoryHandle(p.name);case 2:return a=e.sent,e.next=5,a.getFileHandle("info.json");case 5:return c=e.sent,e.next=8,c.getFile();case 8:return i=e.sent,e.t0=JSON,e.next=12,i.text();case 12:return e.t1=e.sent,s=e.t0.parse.call(e.t0,e.t1),f=s["net.shinyfrog.bear"].uniqueIdentifier,e.next=17,a.getFileHandle("text.txt");case 17:return j=e.sent,e.next=20,j.getFile();case 20:return b=e.sent,e.next=23,b.text();case 23:g=e.sent,x=g.slice(2,g.indexOf("\n")),y={ID:f,Name:x},N=/\[.+\]+\([a-zA-Z\:\/\-\?]+id=+[A-Za-z0-9\-]+\)/g,v=/id=.+\)/g,O=/\[.+\]/g,D=/\B(\#[a-zA-Z/_\\xc4\\xe4\\xd6\\xf6\\xdc\\xfc]+)(?!;)/g,m=[],null===(n=g.match(N))||void 0===n||n.forEach((function(e){var t=v.exec(e),n="";null!==t&&(n=t[0]);var o=O.exec(e),r="";null!==o&&(r=o[0]),null===n||""===n||m.map((function(e){return e.ID})).includes(n)||m.push({ID:n.slice(3,n.length-1),Name:r})})),w=[],null===(r=g.match(D))||void 0===r||r.forEach((function(e){console.log(e),w.push(e)})),g=(g=(g=g.slice(g.indexOf("\n"),g.length)).replace(D,"")).replace(N,""),t=f in t.NodeDictionary?Object(u.a)(Object(u.a)({},t),{},{NodeDictionary:Object(u.a)(Object(u.a)({},t.NodeDictionary),{},Object(h.a)({},f,{ID:f,Name:x,Text:g,Hashtags:[].concat(Object(l.a)(t.NodeDictionary[f].Hashtags),w),X:t.NodeDictionary[f].X,Y:t.NodeDictionary[f].Y,LinksTowards:[].concat(Object(l.a)(t.NodeDictionary[f].LinksTowards),m),LinksFrom:t.NodeDictionary[f].LinksFrom}))}):Object(u.a)(Object(u.a)({},t),{},{NodeDictionary:Object(u.a)(Object(u.a)({},t.NodeDictionary),{},Object(h.a)({},f,{ID:f,Name:x,Text:g,Hashtags:w,X:Math.floor(Math.random()*Math.floor(15e3)),Y:Math.floor(Math.random()*Math.floor(15e3)),LinksTowards:m,LinksFrom:[]}))});for(k=0;k<m.length;k++)t=m[k].ID in t.NodeDictionary?Object(u.a)(Object(u.a)({},t),{},{NodeDictionary:Object(u.a)(Object(u.a)({},t.NodeDictionary),{},Object(h.a)({},m[k].ID,Object(u.a)(Object(u.a)({},t.NodeDictionary[m[k].ID]),{},{LinksFrom:[].concat(Object(l.a)(t.NodeDictionary[m[k].ID].LinksFrom),[y])})))}):Object(u.a)(Object(u.a)({},t),{},{NodeDictionary:Object(u.a)(Object(u.a)({},t.NodeDictionary),{},Object(h.a)({},m[k].ID,{ID:m[k].ID,Name:"",Text:"",Hashtags:[],X:Math.floor(Math.random()*Math.floor(15e3)),Y:Math.floor(Math.random()*Math.floor(15e3)),LinksTowards:[],LinksFrom:[y]}))});case 40:case"end":return e.stop()}}),e)}))(),"t0",19);case 19:a(t);case 20:r=!0,e.next=8;break;case 23:e.next=29;break;case 25:e.prev=25,e.t1=e.catch(6),c=!0,i=e.t1;case 29:if(e.prev=29,e.prev=30,r||null==s.return){e.next=34;break}return e.next=34,s.return();case 34:if(e.prev=34,!c){e.next=37;break}throw i;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[6,25,29,39],[30,,34,38]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=setTimeout((function(){a(Object(u.a)({},function(e){var t=e,n=[7500,7500],o=.5,r=0;return Object.keys(e.NodeDictionary).forEach((function(a){var c=e.NodeDictionary[a].X,i=e.NodeDictionary[a].Y,s=0,d=0;Object.keys(e.NodeDictionary).forEach((function(t){if(t!==a){var n=e.NodeDictionary[t].X,o=e.NodeDictionary[t].Y,r=Math.sqrt(Math.pow(c-n,2)+Math.pow(i-o,2));r<Math.pow(10,-3)&&(r=.5),s+=80*-(n-c)/r,d+=80*-(o-i)/r}})),s+=-(c-n[0]),d+=-(i-n[1]),e.NodeDictionary[a].LinksTowards.forEach((function(t){var n=e.NodeDictionary[t.ID].X,r=e.NodeDictionary[t.ID].Y;s+=(n-c)*o,d+=(r-i)*o})),e.NodeDictionary[a].LinksFrom.forEach((function(t){var n=e.NodeDictionary[t.ID].X,r=e.NodeDictionary[t.ID].Y;s+=(n-c)*o,d+=(r-i)*o})),r+=Math.pow(s,2)+Math.pow(d,2);var l=c+.1*s,h=i+.1*d;t.NodeDictionary[a].X=l,t.NodeDictionary[a].Y=h})),t.Energy=r,t}(n)))}),40);return function(){return clearTimeout(e)}})),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsxs)("div",{className:"App-header",children:[Object(o.jsx)("div",{className:"download-logo-container",onClick:function(){return x.apply(this,arguments)},children:Object(o.jsx)(v,{})}),Object(o.jsx)("img",{className:"notas-logo",src:p,alt:""})]}),Object(o.jsxs)("div",{className:"App-main",children:[Object(o.jsx)("div",{className:"App-graph",children:Object(o.jsx)(O,{Graph:n,SelectedNode:s,onClickNode:function(e){e in n.NodeDictionary&&(console.log(e),g(Object(u.a)({},n.NodeDictionary[e])))}})}),Object(o.jsx)("div",{className:"App-sidebar",children:Object(o.jsx)(D,{Node:s})})]})]})},w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),o(e),r(e),a(e),c(e)}))};i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(m,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/notas",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/notas","/service-worker.js");w?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):k(t,e)}))}}(),I()}},[[27,1,2]]]);
//# sourceMappingURL=main.d26b191c.chunk.js.map